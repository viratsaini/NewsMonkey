{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/virat/OneDrive/Desktop/projects/newsapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/virat/OneDrive/Desktop/projects/newsapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/virat/OneDrive/Desktop/projects/newsapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import NewsItem from\"./NewsItem\";import SpinNer from\"./SpinNer\";import InfiniteScroll from\"react-infinite-scroll-component\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var News=function News(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),articles=_useState2[0],setarticlest=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setaloading=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setpage=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalResults=_useState8[0],settotalResults=_useState8[1];var componentDidMount=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,data,parseddata;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:props.setProgress(10);url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=\").concat(props.apikey,\"&page=1&pageSize=\").concat(props.pagesize);setaloading(true);_context.next=5;return fetch(url);case 5:data=_context.sent;props.setProgress(40);_context.next=9;return data.json();case 9:parseddata=_context.sent;props.setProgress(60);setarticlest(parseddata.articles);setaloading(false);settotalResults(parseddata.totalResults);props.setProgress(100);case 15:case\"end\":return _context.stop();}},_callee);}));return function componentDidMount(){return _ref.apply(this,arguments);};}();useEffect(function(){componentDidMount();//eslint-disable-next-line\n},[]);var fetchMoreData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var url,data,parseddata;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=\").concat(props.apikey,\"&page=\").concat(page+1,\"\\n      &pageSize=\").concat(props.pagesize);setpage(page+1);_context2.next=4;return fetch(url);case 4:data=_context2.sent;_context2.next=7;return data.json();case 7:parseddata=_context2.sent;setarticlest(articles.concat(parseddata.articles));// setaloading(false);\nsettotalResults(parseddata.totalResults);case 10:case\"end\":return _context2.stop();}},_callee2);}));return function fetchMoreData(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-center\",style:{marginTop:\"80px\"},children:[\"NewsMonkey-Top \",props.category,\" Headlines\"]}),loading&&/*#__PURE__*/_jsx(SpinNer,{}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:articles.length,next:fetchMoreData,hasMore:articles.length!==totalResults,loader:/*#__PURE__*/_jsx(SpinNer,{}),children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:articles.map(function(element){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(NewsItem,{title:element.title?element.title.slice(0,45):\"\",description:element.description?element.description.slice(0,85):\"\",imageUrl:element.urlToImage,newsUrl:element.url,author:element.author,date:element.publishedAt,source:element.source.name})},element.url);})})})})]});};News.defaultProps={country:\"in\",pagesize:18,category:\"general\"};export default News;","map":{"version":3,"names":["React","useEffect","useState","NewsItem","SpinNer","InfiniteScroll","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","News","props","_useState","_useState2","_slicedToArray","articles","setarticlest","_useState3","_useState4","loading","setaloading","_useState5","_useState6","page","setpage","_useState7","_useState8","totalResults","settotalResults","componentDidMount","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","data","parseddata","wrap","_callee$","_context","prev","next","setProgress","concat","country","category","apikey","pagesize","fetch","sent","json","stop","apply","arguments","fetchMoreData","_ref2","_callee2","_callee2$","_context2","children","className","style","marginTop","dataLength","length","hasMore","loader","map","element","title","slice","description","imageUrl","urlToImage","newsUrl","author","date","publishedAt","source","name","defaultProps"],"sources":["C:/Users/virat/OneDrive/Desktop/projects/newsapp/src/components/News.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport NewsItem from \"./NewsItem\";\r\nimport SpinNer from \"./SpinNer\";\r\nimport PropTypes from \"prop-types\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\nconst News = (props) => {\r\n  const [articles, setarticlest] = useState([]);\r\n  const [loading, setaloading] = useState(true);\r\n  const [page, setpage] = useState(1);\r\n  const [totalResults, settotalResults] = useState(0);\r\n\r\n  const componentDidMount = async () => {\r\n    props.setProgress(10);\r\n    let url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=${props.apikey}&page=1&pageSize=${props.pagesize}`;\r\n    setaloading(true);\r\n    let data = await fetch(url);\r\n    props.setProgress(40);\r\n    let parseddata = await data.json();\r\n    props.setProgress(60);\r\n    setarticlest(parseddata.articles);\r\n    setaloading(false);\r\n    settotalResults(parseddata.totalResults);\r\n\r\n    props.setProgress(100);\r\n  };\r\n  useEffect(() => {\r\n    componentDidMount();\r\n    //eslint-disable-next-line\r\n  }, []);\r\n  const fetchMoreData = async () => {\r\n    let url = `https://newsapi.org/v2/top-headlines?country=${\r\n      props.country\r\n    }&category=${props.category}&apiKey=${props.apikey}&page=${page + 1}\r\n      &pageSize=${props.pagesize}`;\r\n    setpage(page + 1);\r\n    let data = await fetch(url);\r\n    let parseddata = await data.json();\r\n    setarticlest(articles.concat(parseddata.articles));\r\n    // setaloading(false);\r\n    settotalResults(parseddata.totalResults);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h1 className=\"text-center\" style={{ marginTop: \"80px\" }}>\r\n        NewsMonkey-Top {props.category} Headlines\r\n      </h1>\r\n      {loading && <SpinNer />}\r\n      <InfiniteScroll\r\n        dataLength={articles.length}\r\n        next={fetchMoreData}\r\n        hasMore={articles.length !== totalResults}\r\n        loader={<SpinNer />}\r\n      >\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            {articles.map((element) => {\r\n              return (\r\n                <div className=\"col-md-4\" key={element.url}>\r\n                  <NewsItem\r\n                    title={element.title ? element.title.slice(0, 45) : \"\"}\r\n                    description={\r\n                      element.description\r\n                        ? element.description.slice(0, 85)\r\n                        : \"\"\r\n                    }\r\n                    imageUrl={element.urlToImage}\r\n                    newsUrl={element.url}\r\n                    author={element.author}\r\n                    date={element.publishedAt}\r\n                    source={element.source.name}\r\n                  />\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </InfiniteScroll>\r\n    </>\r\n  );\r\n};\r\n\r\nNews.defaultProps = {\r\n  country: \"in\",\r\n  pagesize: 18,\r\n  category: \"general\",\r\n};\r\nNews.propTypes = {\r\n  country: PropTypes.string,\r\n  pagesize: PropTypes.number,\r\n  category: PropTypes.string,\r\n};\r\n\r\nexport default News;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}